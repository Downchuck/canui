<!DOCTYPE html>

<!-- $Id: index.html 32 2011-07-05 20:13:26Z mcdougall $ -->

<html>
<head>
  <title>canui: example</title>
  <script type="text/javascript" src="../libs/jquery-1.5.1.min.js"></script>
  <script type="text/javascript" src="../libs/jquery.mousewheel.min.js"></script>
  <script type="text/javascript" src="../libs/namespace.js"></script>
  <script type="text/javascript" src="../src/geo.js"></script>
  <script type="text/javascript" src="../src/graphics.js"></script>
  <script type="text/javascript" src="../src/utility.js"></script>
  <script type="text/javascript" src="../src/control.js"></script>
  <script type="text/javascript" src="../src/container.js"></script>
  <script type="text/javascript" src="../src/root_panel.js"></script>
  <script type="text/javascript" src="../src/button.js"></script>
  <script type="text/javascript" src="../src/list.js"></script>
  <script type="text/javascript" src="../src/label.js"></script>
  <script type="text/javascript" src="../src/textbox.js"></script>
  <script type="text/javascript" src="../src/controls.js"></script>
  <script type="text/javascript" src="../src/slider.js"></script>
  <script type="text/javascript" src="../src/scroller.js"></script>
  <script type="text/javascript" src="../src/menu.js"></script>
  <script type="text/javascript" src="../src/html.js"></script>
  <script type="text/javascript" src="../src/layout.js"></script>
</head>

<script type="text/javascript">
var g_rp = undefined;

function dump()
{
  var w = window.open("");   
  w.document.write("<html><head></head><body><pre>");
  w.document.write(g_rp.dump());
  w.document.write("</pre></body></html>");
}

function test()
{
  alert("hello");
}

function slider_changed(v)
{
  assert(g_rp != undefined);
  g_rp.find_id("slider-value").caption(
    "slider value: " + to_int(v));
}

function test_widget()
{
  ui.inherit_control(this);

  this.w = 100;
  this.h = 100;

  this.best_dimension = function()
  {
    return new dimension(this.w, this.h);
  }

  this.draw = function(context)
  {
    this.control__draw(context);

    var b = this.bounds();

    var w = this.width();
    var h = this.height();

    w -= text_dimension("10", this.font()).w
    h -= text_dimension("10", this.font()).h

    outline_rect(context, new color().red(), this.bounds());

    for (var x=0; x<=10; ++x)
    {
      for (var y=0; y<=10; ++y)
      {
        var r = new rectangle(b.x + (x/10)*w, b.y + (y/10)*h, 50, 50);
        draw_text(context, "" + x, new color().black(), r, this.font());
      }
    }
  }
}

$(function()
{
  set_image_dir("../src/images");
  
  var r = document.getElementById("ui");
  g_rp = ui.create_root_panel(r);

  //var tb = new ui.textbox({text: "case ui.key_codes.down:\n{\nif (rp.key_state(ui.key_codes.ctrl))\n{\n// noop, todo: scroll down\n}\nelse\n{\nif (rp.key_state(ui.key_codes.shift))\n{\nvar p = next_line_same_column(sel_.last);\nself.selection(sel_.first, p);\n}\nelse\n{\nvar s = Math.max(sel_.first, sel_.last);\nvar p = next_line_same_column(s);\n\nself.selection(p);\n}\n"});
  //g_rp.add(tb, ui.sides.center);

  for (var i=0; i<5; ++i)
  {
    var c = new ui.radio({caption: "Mtestg"});
    c.borders({all: 1});

    g_rp.add(c);
  }

});
</script>

<body>
<h2>canui</h2>
<p><a href="../index.html">home</a><br>
<a href="https://sourceforge.net/projects/canui/">sourceforge project page</a></p>

<p>This is a &lt;canvas&gt; element on which several controls are
created.

<div id="ui">
  <div data-type="root_panel" data-layout="new ui.vertical_layout({margin: 5})" width="300" height="300">
  </div>
</div>

</p>
<p>This will show the structure of the controls: <input type="button" value="dump" onclick="dump()" /></p>

</div>
</html>
