<!DOCTYPE html>

<!-- $Id: index.html 32 2011-07-05 20:13:26Z mcdougall $ -->

<html>
<head>
  <title>canui: example</title>
  <script type="text/javascript" src="../libs/jquery-1.5.1.min.js"></script>
  <script type="text/javascript" src="../libs/jquery.mousewheel.min.js"></script>
  <script type="text/javascript" src="../libs/namespace.js"></script>
  <script type="text/javascript" src="../src/geo.js"></script>
  <script type="text/javascript" src="../src/graphics.js"></script>
  <script type="text/javascript" src="../src/utility.js"></script>
  <script type="text/javascript" src="../src/control.js"></script>
  <script type="text/javascript" src="../src/container.js"></script>
  <script type="text/javascript" src="../src/root_panel.js"></script>
  <script type="text/javascript" src="../src/button.js"></script>
  <script type="text/javascript" src="../src/list.js"></script>
  <script type="text/javascript" src="../src/label.js"></script>
  <script type="text/javascript" src="../src/textbox.js"></script>
  <script type="text/javascript" src="../src/controls.js"></script>
  <script type="text/javascript" src="../src/slider.js"></script>
  <script type="text/javascript" src="../src/scroller.js"></script>
  <script type="text/javascript" src="../src/image.js"></script>
  <script type="text/javascript" src="../src/combobox.js"></script>
  <script type="text/javascript" src="../src/menu.js"></script>
  <script type="text/javascript" src="../src/html.js"></script>
  <script type="text/javascript" src="../src/layout.js"></script>
</head>

<script type="text/javascript">
var g_rp = undefined;

function dump()
{
  var w = window.open("");   
  w.document.write("<html><head></head><body><pre>");
  w.document.write(g_rp.dump());
  w.document.write("</pre></body></html>");
}

function test()
{
  alert("hello");
}

function slider_changed(v)
{
  assert(g_rp != undefined);
  g_rp.find_id("slider-value").caption(
    "slider value: " + to_int(v));
}

function test_widget()
{
  ui.inherit_control(this);

  this.w = 100;
  this.h = 100;

  this.best_dimension = function()
  {
    return new dimension(this.w, this.h);
  }

  this.draw = function(context)
  {
    this.control__draw(context);

    var b = this.bounds();

    var w = this.width();
    var h = this.height();

    w -= text_dimension("10", this.font()).w
    h -= text_dimension("10", this.font()).h

    outline_rect(context, new color().red(), this.bounds());

    for (var x=0; x<=10; ++x)
    {
      for (var y=0; y<=10; ++y)
      {
        var r = new rectangle(b.x + (x/10)*w, b.y + (y/10)*h, 50, 50);
        draw_text(context, "" + x, new color().black(), r, this.font());
      }
    }
  }
}

$(function()
{
  set_image_dir("../src/images");

  //logical_compare("item 1", "item 1");
  
/*  var r = explode("item 1\nmultiline\ntest meh bleh\nline", "\n");
  console.log(dump_array(r));
  return;*/
  

  g_rp = ui.create_root_panel("rp");

  //var tb = new ui.textbox({text: "case ui.key_codes.down:\n{\nif (rp.key_state(ui.key_codes.ctrl))\n{\n// noop, todo: scroll down\n}\nelse\n{\nif (rp.key_state(ui.key_codes.shift))\n{\nvar p = next_line_same_column(sel_.last);\nself.selection(sel_.first, p);\n}\nelse\n{\nvar s = Math.max(sel_.first, sel_.last);\nvar p = next_line_same_column(s);\n\nself.selection(p);\n}\n"});
  //g_rp.add(tb, ui.sides.center);

  /*var p = new ui.progress();
  p.value(-1);

  setTimeout(function()
    {
      setInterval(function()
      {
        p.value(p.value() + 1);
      }, 500);
    }, 5000);

  g_rp.add(p);*/

  //g_rp.add(new ui.textbox());
  
  var l = new ui.list({column_resize: "none"});
  l.add_column("col 1", 100);
  l.add_column("col 2");

  l.frozen(true);
  for (var i=0; i<50; ++i)
    l.add_item(["item " + i, "col " + to_int(Math.random() * 20)]);
  l.frozen(false);

  g_rp.add(l, ui.sides.center);

  var p = new ui.panel({layout: new ui.horizontal_layout()});
  var t = new ui.textbox();
  var b = new ui.button({caption: "goto"});
  b.clicked.add(function()
    {
      var i = to_int(t.text());
      if (i >= 0 && i < l.item_count())
        l.scroll_to_item(i, "center");
    });

  p.add(t);
  p.add(b);

  g_rp.add(p, ui.sides.bottom);
});
</script>

<body>
<h2>canui</h2>
<p><a href="../index.html">home</a><br>
<a href="https://sourceforge.net/projects/canui/">sourceforge project page</a></p>

<p>This is a &lt;canvas&gt; element on which several controls are
created.

<div id="rp" data-layout="new ui.border_layout({margin: 5, padding: 3})" width="300" height="300">
</div>

</p>
<p>This will show the structure of the controls: <input type="button" value="dump" onclick="dump()" /></p>

</div>
</html>
